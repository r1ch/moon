{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/App.vue?093a","webpack:///./src/SkyComponent.vue?0f50","webpack:///src/SkyComponent.vue","webpack:///./src/SkyComponent.vue?3981","webpack:///./src/SkyComponent.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/SkyComponent.vue?760d"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_v","_s","now","toLocaleTimeString","_m","nextRise","time","getDate","nextSet","deviceCoordinates","error","_e","on","locate","default","Number","latitude","toFixed","longitude","altitude","angle","illuminated","times","currentPosition","waxWane","staticRenderFns","phaseText","props","top","left","right","bottom","width","height","moonFull","margin","radius","moonInner","moon","offset","join","horizonFull","horizon","horizonInner","mounted","moonSvg","d3","horizonSvg","filter","feMerge","append","attr","draw","watch","computed","phase","methods","sweeps","lit","dark","cardinals","reduce","Math","abs","current","az","point","component","components","created","midnight","calculateMidnight","setInterval","date","day","console","log","previous","Date","next","getTimesFor","navigator","geolocation","getCurrentPosition","jdo","A","JulianDay","astronomicalCoordinates","EclCoord","fromWgs84","sunTopocentricPosition","Solar","apparentTopocentric","moonTopocentricPosition","Moon","topocentricPosition","MoonIllum","phaseAngleEq2","rise","find","set","absAlt","detail","k","position","step","minute","second","alt","entry","previousPosition","max","Vue","config","productionTip","render","h","App","$mount"],"mappings":"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","file":"js/app.b1a80358.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/moon/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_vm._v(\" \"+_vm._s(this.now.toLocaleTimeString())),_c('br'),_c('table',[_vm._m(0),_c('tr',[_c('td',[_vm._v(\" \"+_vm._s(this.nextRise.time.toLocaleTimeString())),_c('br'),_c('small',[_vm._v(_vm._s(this.nextRise.time.getDate() == this.now.getDate() ? \"today\" : \"tomorrow\"))])]),_c('td',[_vm._v(\" \"+_vm._s(this.nextSet.time.toLocaleTimeString())),_c('br'),_c('small',[_vm._v(_vm._s(this.nextSet.time.getDate() == this.now.getDate() ? \"today\" : \"tomorrow\"))])])])]),_c('br'),(_vm.deviceCoordinates.default)?_c('p',[_vm._v(\" I've assumed you're in London \"),_c('br'),(!_vm.deviceCoordinates.error)?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.locate}},[_vm._v(\"Update location\")]):_vm._e()]):_vm._e(),(_vm.deviceCoordinates.error)?_c('p',[_vm._v(_vm._s(_vm.deviceCoordinates.error))]):_vm._e(),(!_vm.deviceCoordinates.error && !_vm.deviceCoordinates.default)?_c('p',[_vm._v(\" Lat, Lng: \"+_vm._s(Number(_vm.deviceCoordinates.latitude).toFixed(3))+\", \"+_vm._s(Number(_vm.deviceCoordinates.longitude).toFixed(3))+\" \"),_c('br'),_vm._v(\" Height above sea: \"+_vm._s(Number(_vm.deviceCoordinates.altitude).toFixed(1))+\"m \")]):_vm._e(),_c('br'),_c('sky-component',{attrs:{\"now\":_vm.now,\"angle\":_vm.angle,\"illuminated\":_vm.illuminated,\"times\":_vm.times,\"currentPosition\":_vm.currentPosition,\"waxWane\":_vm.waxWane}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('td',[_vm._v(\"Rise\")]),_c('td',[_vm._v(\"Set\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"d3\"}},[_c('div',{attrs:{\"id\":\"moon\"}}),_c('small',[_vm._v(_vm._s(_vm.phaseText)+\" (\"+_vm._s(Number(100 * this.illuminated).toFixed(1))+\"%)\")]),_c('div',{attrs:{\"id\":\"horizon\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div id=\"d3\">\n      <div id=\"moon\"></div>\n      <small\n        >{{ phaseText }} ({{\n          Number(100 * this.illuminated).toFixed(1)\n        }}%)</small\n      >\n      <div id=\"horizon\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst d3 = require(\"d3\");\n\nexport default {\n  name: \"sky-component\",\n  props: [\"now\", \"angle\", \"illuminated\", \"times\", \"currentPosition\", \"waxWane\"],\n  data: function() {\n    let margin = {\n      top: 20,\n      left: 20,\n      right: 20,\n      bottom: 20\n    };\n\n    let moonFull = {\n      width: 200,\n      height: 200\n    };\n    let moonInner = {\n      width: moonFull.width - margin.left - margin.right,\n      height: moonFull.height - margin.top - margin.bottom\n    };\n    let moon = {\n      radius: moonInner.width / 2\n    };\n    moon.offset = [moonInner.width / 2 - moon.radius, 0].join(\",\");\n\n    let horizonFull = {\n      width: 900,\n      height: 200\n    };\n    let horizonInner = {\n      width: horizonFull.width - margin.left - margin.right,\n      height: horizonFull.height - margin.top - margin.bottom\n    };\n    let horizon = {\n      radius: 10\n    };\n    horizon.offset = [0, horizonInner.height / 2].join(\",\");\n\n    return {\n      moonFull: moonFull,\n      moonInner: moonFull,\n      moon: moon,\n      horizonFull: horizonFull,\n      horizonInner: horizonInner,\n      horizon: horizon,\n      margin: margin\n    };\n  },\n  mounted: function() {\n    this.moonSvg = d3\n      .select(\"#moon\")\n      .append(\"svg\")\n      .attr(\"width\", this.moonFull.width)\n      .attr(\"height\", this.moonFull.height)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${this.margin.left},${this.margin.top})`)\n      .append(\"g\");\n\n    this.moonSvg\n      .append(\"clipPath\")\n      .attr(\"id\", \"outer-clip\")\n      .append(\"circle\")\n      .attr(\"r\", this.moon.radius)\n      .attr(\"cx\", this.moon.radius)\n      .attr(\"cy\", this.moon.radius);\n\n    this.horizonSvg = d3\n      .select(\"#horizon\")\n      .append(\"svg\")\n      .attr(\"width\", this.horizonFull.width)\n      .attr(\"height\", this.horizonFull.height)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${this.margin.left},${this.margin.top})`)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${this.horizon.offset})`);\n\n    let defs = this.moonSvg.append(\"defs\");\n    let filter = defs\n      .append(\"filter\")\n      .attr(\"id\", \"glow\")\n      .attr(\"x\", \"-50%\")\n      .attr(\"y\", \"-50%\")\n      .attr(\"width\", \"200%\")\n      .attr(\"height\", \"200%\");\n\n    filter\n      .append(\"feGaussianBlur\")\n      .attr(\"stdDeviation\", 1)\n      .attr(\"result\", \"moonDark\");\n\n    filter\n      .append(\"feGaussianBlur\")\n      .attr(\"stdDeviation\", 12)\n      .attr(\"result\", \"moonShine\");\n\n\n    let feMerge = filter.append(\"feMerge\");\n\n    feMerge.append(\"feMergeNode\").attr(\"in\", \"moonDark\");\n    feMerge.append(\"feMergeNode\").attr(\"in\", \"moonShine\");\n    feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\");\n\n    this.draw();\n  },\n  watch: {\n    now: function() {\n      this.draw();\n    }\n  },\n  computed: {\n    phaseText() {\n      let index = this.waxWane < 0 ? this.illuminated / 2 : (2-this.illuminated)/2\n      return [\n        { index: 0.01, text: \"New Moon\" },\n        { index: 0.249, text: \"Waxing Crescent\" },\n        { index: 0.251, text: \"First Quarter\" },\n        { index: 0.499, text: \"Waxing Gibbous\" },\n        { index: 0.501, text: \"Full Moon\" },\n        { index: 0.749, text: \"Waning Gibbous\" },\n        { index: 0.751, text: \"Last Quarter\" },\n        { index: 0.99, text: \"Waning Crescent\" },\n        { index: 1.0, text: \"New Moon\" }\n      ].find(name => index < name.index).text;\n    },\n    phase(){\n      return 1 - this.illuminated / 2;\n    }\n  },\n  methods: {\n    sweeps: function(radius, phase) {\n      let sweeps = {\n        lit: [`M ${radius} 0`],\n        dark: [`M ${radius} 0`]\n      };\n\n      // eslint-disable-next-line\n      sweeps.lit.push(`a ${radius * (phase <= 0.5 ? 4 * Math.abs(phase - 0.25) : 1)}, ${radius} 0 0 ${phase <= 0.25 ? 1 : 0} 0,${2 * radius}`);\n      // eslint-disable-next-line\n      sweeps.lit.push(`a ${radius * (phase <= 0.5 ? 1 : 4 * Math.abs(phase - 0.75))}, ${radius} 0 0 ${phase <= 0.75 ? 0 : 1} 0,${-2 * radius}`);\n      // eslint-disable-next-line\n      sweeps.dark.push(`a ${radius * (phase <= 0.5 ? 1 : 4 * Math.abs(phase - 0.75))},${radius} 0 0 ${phase > 0.5 && phase <= 0.75 ? 1 : 0} 0,${2 * radius}`);\n      // eslint-disable-next-line\n      sweeps.dark.push(`a ${radius * (phase <= 0.5 ? 4 * Math.abs(phase - 0.25) : 1)},${radius} 0 0 ${phase >= 0.25 && phase < 0.5 ? 1 : 0} 0,${-2 * radius}`);\n      \n      return sweeps;\n    },\n    draw: function() {\n      let moonSweeps = this.sweeps(this.moon.radius, this.phase);\n      let horizonSweeps = this.sweeps(this.horizon.radius, this.phase);\n\n      this.moonSvg.attr(\n        \"transform\",\n        `translate(${this.moon.offset}) rotate(${this.angle} ${this.moon.radius}, ${this.moon.radius})`\n      );\n\n     this.moonSvg\n        .selectAll(\".moonborder\")\n        .data([1])\n        .join(enter =>\n          enter\n            .append(\"circle\")\n            .attr(\"class\",\"moonborder\")\n            .attr(\"r\", this.moon.radius)\n            .attr(\"cx\", this.moon.radius)\n            .attr(\"cy\", this.moon.radius)\n\n        )\n\n      this.moonSvg\n        .selectAll(\".moonlit\")\n        .data([1])\n        .join(enter =>\n          enter\n            .append(\"path\")\n            .attr(\"class\", \"moonlit\")\n            .attr(\"clip-path\", \"url(#outer-clip)\")\n        )\n        .attr(\"d\", `${moonSweeps.lit.join(\" \")}`);\n\n      this.moonSvg\n        .selectAll(\".moondark\")\n        .data([1])\n        .join(enter =>\n          enter\n            .append(\"path\")\n            .attr(\"class\", \"moondark\")\n            .attr(\"clip-path\", \"url(#outer-clip)\")\n        )\n        .attr(\"d\", `${moonSweeps.dark.join(\" \")}`)\n        .style(\"filter\", \"url(#glow)\");\n\n\n      let horizonScale = d3\n        .scaleTime()\n        .domain([\n          this.times.detail[0].time,\n          this.times.detail[this.times.detail.length - 1].time\n        ])\n        .range([0, this.horizonInner.width]);\n\n      let altitudeScale = d3\n        .scaleLinear()\n        .domain([-1 * this.times.absAlt, this.times.absAlt])\n        .range([this.horizonInner.height / 2, this.horizonInner.height / -2]);\n\n      let horizonAxis = d3.axisBottom().scale(horizonScale);\n\n      let risePath = d3\n        .line()\n        .x(d => horizonScale(d.time))\n        .y(d => altitudeScale(d.position.alt));\n\n      //let cardinalPoints = [\"S\",\"SSE\",\"SE\",\"ESE\",\"E\",\"ENE\",\"NE\",\"NNE\",\"N\",\"NNW\",\"NW\",\"WNW\",\"W\",\"WSW\",\"SW\",\"SSW\",\"S\"]\n      let cardinalPoints = [\n        \"N\",\n        \"NNE\",\n        \"NE\",\n        \"ENE\",\n        \"E\",\n        \"ESE\",\n        \"SE\",\n        \"SSE\",\n        \"S\",\n        \"SSW\",\n        \"SW\",\n        \"WSW\",\n        \"W\",\n        \"WNW\",\n        \"NW\",\n        \"NNW\",\n        \"N\"\n      ];\n      let cardinals = cardinalPoints.map((point, i) => ({\n        point: point,\n        az: (i / (cardinalPoints.length - 1) - 0.5) * 2 * Math.PI\n      }));\n\n      let cardinalFor = point => {\n        return cardinals.reduce((previous, current) => {\n          return Math.abs(current.az - point.az) <\n            Math.abs(previous.az - point.az)\n            ? current\n            : previous;\n        }, cardinals[0]);\n      };\n\n      this.horizonSvg\n        .selectAll(\".cardinal\")\n        .data([...this.times.rise, ...this.times.set])\n        .join(enter =>\n          enter\n            .append(\"text\")\n            .attr(\"class\", \"cardinal\")\n            .call(enter =>\n              enter\n                .append(\"tspan\")\n                .attr(\"class\", \"cardinaltime\")\n                .attr(\"dy\", \"1em\")\n            )\n            .call(enter =>\n              enter\n                .append(\"tspan\")\n                .attr(\"class\", \"cardinalposition\")\n                .attr(\"dy\", \"1em\")\n            )\n        )\n        .attr(\"y\", this.horizonInner.height / -4);\n\n      this.horizonSvg\n        .selectAll(\".cardinaltime\")\n        .data([...this.times.rise, ...this.times.set])\n        .text(d => d.time.toLocaleTimeString())\n        .attr(\"x\", d => horizonScale(d.time));\n\n      this.horizonSvg\n        .selectAll(\".cardinalposition\")\n        .data([...this.times.rise, ...this.times.set])\n        .text(d => cardinalFor(d.position).point)\n        .attr(\"x\", d => horizonScale(d.time));\n\n      this.horizonSvg\n        .selectAll(\".axis\")\n        .data([1])\n        .join(enter => enter.append(\"g\").attr(\"class\", \"axis\"))\n        .call(horizonAxis);\n\n      this.horizonSvg\n        .selectAll(\".axislabel\")\n        .data([\"horizon\"])\n        .join(enter =>\n          enter\n            .append(\"text\")\n            .attr(\"class\", \"axislabel\")\n            .text(d => d)\n            .attr(\"dy\", -1)\n        );\n\n      this.horizonSvg\n        .selectAll(\".risePath\")\n        .data([this.times.detail])\n        .join(enter => enter.append(\"path\").attr(\"class\", \"risePath\"))\n        .attr(\"d\", d => risePath(d));\n\n      this.horizonSvg\n        .selectAll(\".tinydark\")\n        .data([1])\n        .join(enter => enter.append(\"path\").attr(\"class\", \"tinydark\"))\n        .attr(\"d\", `${horizonSweeps.dark.join(\" \")}`)\n        .attr(\n          \"transform\",\n          `translate(${horizonScale(this.now) -\n            this.horizon.radius},${altitudeScale(this.currentPosition.alt) -\n            this.horizon.radius}),rotate(${this.angle},${this.horizon.radius},${\n            this.horizon.radius\n          })`\n        );\n\n      this.horizonSvg\n        .selectAll(\".tinylit\")\n        .data([1])\n        .join(enter => enter.append(\"path\").attr(\"class\", \"tinylit\"))\n        .attr(\"d\", `${horizonSweeps.lit.join(\" \")}`)\n        .attr(\n          \"transform\",\n          `translate(${horizonScale(this.now) -\n            this.horizon.radius},${altitudeScale(this.currentPosition.alt) -\n            this.horizon.radius}),rotate(${this.angle},${this.horizon.radius},${\n            this.horizon.radius\n          })`\n        );\n\n      this.horizonSvg\n        .selectAll(\".tinycardinal\")\n        .data([this.currentPosition])\n        .join(enter => enter.append(\"text\").attr(\"class\", \"tinycardinal\"))\n        .text(d => cardinalFor(d).point)\n        .attr(\"x\", horizonScale(this.now))\n        .attr(\"y\", d => altitudeScale(d.alt) + 2 * this.horizon.radius);\n    }\n  }\n};\n</script>\n\n<style>\n#horizon {\n  width: 100%;\n  overflow: scroll;\n  text-align: center;\n}\n\nsvg {\n  display: block;\n  margin: auto;\n}\n\n.axislabel {\n  font-size: 10px;\n}\n\n.moonlit {\n  fill: white;\n  stroke: none;\n}\n\n.moondark {\n  fill: #444;\n  stroke: none;\n}\n\n.moonborder {\n  stroke: rgba(0, 0, 0, 0.5);\n  stroke-width: 1px;\n  fill: none;\n}\n\n\n.orbit {\n  fill: none;\n  stroke: black;\n  stroke-width: 1px;\n  stroke-dasharray: 2 2;\n}\n\n.tinylit {\n  fill: rgba(255, 255, 255, 0.5);\n  stroke: black;\n  stroke-width: 1px;\n}\n\n.tinydark {\n  fill: rgba(0, 0, 0, 0.5);\n  stroke: rgba(0, 0, 0, 0.5);\n  stroke-width: 1px;\n}\n\n.risePath {\n  stroke: black;\n  fill: none;\n  stroke-width: 1px;\n  stroke-dasharray: 1 1;\n}\n\n.cardinaltime {\n  font-size: 10px;\n  text-anchor: middle;\n}\n\n.cardinalposition {\n  text-anchor: middle;\n}\n\n.tinycardinal {\n  text-anchor: middle;\n  font-size: 10px;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SkyComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SkyComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SkyComponent.vue?vue&type=template&id=ab5fb9ca&\"\nimport script from \"./SkyComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./SkyComponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SkyComponent.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    {{ this.now.toLocaleTimeString() }}<br />\n    <table>\n      <tr>\n        <td>Rise</td>\n        <td>Set</td>\n      </tr>\n      <tr>\n        <td>\n          {{ this.nextRise.time.toLocaleTimeString() }}<br />\n          <small>{{\n            this.nextRise.time.getDate() == this.now.getDate()\n              ? \"today\"\n              : \"tomorrow\"\n          }}</small>\n        </td>\n        <td>\n          {{ this.nextSet.time.toLocaleTimeString() }}<br />\n          <small>{{\n            this.nextSet.time.getDate() == this.now.getDate()\n              ? \"today\"\n              : \"tomorrow\"\n          }}</small>\n        </td>\n      </tr>\n    </table>\n\n    <br />\n    <p v-if=\"deviceCoordinates.default\">\n      I've assumed you're in London\n      <br />\n      <a href=\"#\" v-if=\"!deviceCoordinates.error\" @click=\"locate\"\n        >Update location</a\n      >\n    </p>\n    <p v-if=\"deviceCoordinates.error\">{{ deviceCoordinates.error }}</p>\n    <p v-if=\"!deviceCoordinates.error && !deviceCoordinates.default\">\n      Lat, Lng: {{ Number(deviceCoordinates.latitude).toFixed(3) }},\n      {{ Number(deviceCoordinates.longitude).toFixed(3) }}\n      <br />\n      Height above sea: {{ Number(deviceCoordinates.altitude).toFixed(1) }}m\n    </p>\n    <br />\n    <sky-component\n      :now=\"now\"\n      :angle=\"angle\"\n      :illuminated=\"illuminated\"\n      :times=\"times\"\n      :currentPosition=\"currentPosition\"\n      :waxWane=\"waxWane\"\n    ></sky-component>\n  </div>\n</template>\n\n<script>\nimport SkyComponent from \"./SkyComponent.vue\";\nconst A = require(\"meeusjs\");\n\nexport default {\n  name: \"App\",\n  components: { SkyComponent },\n  data: () => ({\n    deviceCoordinates: {\n      default: true,\n      error: false,\n      latitude: 51.5074,\n      longitude: 0.1278,\n      altitude: 0\n    },\n    day: new Date().getDate(),\n    now: new Date(),\n    waxWane : false,\n    midnight: false\n  }),\n  created: function() {\n    this.midnight = this.calculateMidnight();\n    setInterval(() => {\n      let date = new Date();\n      if (date.getDate() != this.day) this.day = date.getDate();\n      this.now = date;\n    }, 1000);\n  },\n  watch: {\n    day: function() {\n      this.midnight = this.calculateMidnight();\n    },\n    illuminated(newVal,oldVal){\n      if(newVal && oldVal) this.waxWane = newVal > oldVal ? -1 : +1;\n    }\n  },\n  methods: {\n    calculateMidnight: function() {\n      console.log(\"Update to midnight\");\n      return {\n        previous: new Date(\n          this.now.getFullYear(),\n          this.now.getMonth(),\n          this.now.getDate(),\n          0,\n          0,\n          0\n        ).getTime(),\n        next: new Date(\n          this.now.getFullYear(),\n          this.now.getMonth(),\n          this.now.getDate() + 2,\n          0,\n          0,\n          0\n        ).getTime()\n      };\n    },\n    getTimesFor() {},\n    locate: function() {\n      navigator.geolocation.getCurrentPosition(\n        position => {\n          console.log(position);\n          this.deviceCoordinates.latitude = position.coords.latitude;\n          this.deviceCoordinates.longitude = position.coords.longitude;\n          this.deviceCoordinates.altitude = position.coords.altitude || 0;\n          this.deviceCoordinates.default = false;\n        },\n        error => {\n          this.deviceCoordinates.error = error.message;\n        },\n        { maximumAge: 50000, timeout: 20000 }\n      );\n    }\n  },\n  computed: {\n    jdo() {\n      return new A.JulianDay(this.now);\n    },\n    astronomicalCoordinates() {\n      return A.EclCoord.fromWgs84(\n        this.deviceCoordinates.latitude,\n        this.deviceCoordinates.longitude,\n        this.deviceCoordinates.altitide\n      );\n    },\n    sunTopocentricPosition() {\n      return A.Solar.apparentTopocentric(\n        this.jdo,\n        this.astronomicalCoordinates\n      );\n    },\n    moonTopocentricPosition() {\n      return A.Moon.topocentricPosition(this.jdo, this.astronomicalCoordinates);\n    },\n    phase() {\n      return A.MoonIllum.phaseAngleEq2(\n        this.moonTopocentricPosition.eq,\n        this.sunTopocentricPosition\n      );\n    },\n    illuminated() {\n      return A.MoonIllum.illuminated(this.phase);\n    },\n    angle() {\n      let PA = A.MoonIllum.positionAngle(\n        this.moonTopocentricPosition.eq,\n        this.sunTopocentricPosition\n      );\n      return ((PA - this.moonTopocentricPosition.q) / Math.PI) * -180 + 90;\n    },\n    currentPosition() {\n      return A.Moon.topocentricPosition(this.jdo, this.astronomicalCoordinates)\n        .hz;\n    },\n    nextRise() {\n      return this.times.rise.find(\n        rise => rise.time.getTime() > this.now.getTime()\n      );\n    },\n    nextSet() {\n      return this.times.set.find(\n        set => set.time.getTime() > this.now.getTime()\n      );\n    },\n    times() {\n      let minute = 3 * 60 * 1000;\n      let second = 1000;\n      let times = {\n        absAlt: 0,\n        rise: [],\n        set: [],\n        detail: []\n      };\n      let k = 0;\n      for (\n        let [i, step, previousPosition] = [\n          this.midnight.previous,\n          minute,\n          false,\n          0\n        ];\n        i <= this.midnight.next;\n        i += step\n      ) {\n        k++;\n        let time = new Date(i);\n        let position = A.Moon.topocentricPosition(\n          new A.JulianDay(time),\n          this.astronomicalCoordinates\n        ).hz;\n        let entry = {\n          time: time,\n          position: position\n        };\n        if (\n          previousPosition &&\n          Math.sign(previousPosition.alt) != Math.sign(position.alt)\n        ) {\n          // we just crossed the horizon\n          if (step == minute) {\n            //backtrack and do this in seconds\n            console.log(`Crossed ${time}, ${step}`);\n            i -= step;\n            step = second;\n            i += step;\n            console.log(`Crossed ${time}, ${step}`);\n            continue;\n          } else {\n            console.log(`Crossed ${time}, ${step}`);\n            //capture the crossing, then skip to next iteration\n            position.alt > 0 ? times.rise.push(entry) : times.set.push(entry);\n            step = minute;\n            i -= i % step;\n            console.log(`Crossed ${time}, ${step}`);\n          }\n        }\n        previousPosition = position;\n        times.absAlt = Math.max(times.absAlt, Math.abs(position.alt));\n        times.detail.push(entry);\n      }\n      console.log(k);\n      return times;\n    }\n  }\n};\n</script>\n\n<style>\ntable {\n  margin: auto;\n}\ntd {\n  padding: 0 10px;\n}\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  margin-top: 60px;\n}\na {\n  color: black;\n}\nhtml {\n  background: white;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=fff10ae2&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: h => h(App)\n}).$mount(\"#app\");\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SkyComponent.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SkyComponent.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}